# Demo 环境说明

这个目录包含了 SDK 的演示和测试环境，分为开发环境和生产环境两个部分。

## 📁 目录结构

```
demo/
├── dev/                 # 开发环境 - 直接引用 SDK 源码
│   ├── src/
│   ├── index.html
│   ├── package.json
│   ├── vite.config.ts
│   └── README.md
├── h5/                  # 生产环境 - 引用发布的 npm 包
│   ├── src/
│   ├── index.html
│   ├── package.json
│   ├── vite.config.ts
│   └── README.md
├── start-dev.sh         # 开发环境启动脚本
├── start-prod.sh        # 生产环境启动脚本
└── README.md           # 本文件
```

## 🚀 快速启动

### 开发环境（推荐用于开发调试）

```bash
# 方法1：使用启动脚本
./demo/start-dev.sh

# 方法2：手动启动
cd demo/dev
pnpm install
pnpm dev
```

访问地址：http://localhost:5174

### 生产环境（用于测试发布包）

```bash
# 方法1：使用启动脚本
./demo/start-prod.sh

# 方法2：手动启动
cd demo/h5
pnpm install
pnpm dev
```

访问地址：http://localhost:5173

## 🔧 环境对比

| 特性 | 开发环境 (`dev/`) | 生产环境 (`h5/`) |
|------|------------------|------------------|
| **源码引用** | 直接引用 SDK 源码 | 引用发布的 npm 包 |
| **构建需求** | 无需构建和发布 | 需要先构建和发布包 |
| **调试能力** | 完整的源码调试 | 只能调试编译后的代码 |
| **热重载** | ✅ 支持 | ❌ 不支持 |
| **端口** | 5174 | 5173 |
| **适用场景** | 开发调试 | 功能验证 |

## 🎯 使用建议

### 开发阶段
1. 使用开发环境 (`demo/dev/`) 进行功能开发
2. 直接修改 SDK 源码并立即看到效果
3. 使用浏览器开发者工具进行调试
4. 功能确认无误后再构建和发布包

### 测试阶段
1. 使用生产环境 (`demo/h5/`) 验证发布包
2. 模拟真实的使用场景
3. 确保发布包功能正常

### 问题排查
1. 在开发环境中复现问题
2. 使用源码调试定位问题
3. 修复后在生产环境中验证

## 🔍 调试技巧

### 开发环境调试
- 在浏览器 Sources 面板中直接查看和调试 SDK 源码
- 在 Console 面板中查看详细的日志输出
- 在 Network 面板中监控网络请求
- 修改源码后刷新页面即可看到效果

### 生产环境调试
- 在 Console 面板中查看日志输出
- 在 Network 面板中监控网络请求
- 使用发布包的 API 进行调试

## 📝 注意事项

1. **端口冲突**：两个环境使用不同端口，避免冲突
2. **依赖管理**：开发环境不依赖发布的包，生产环境依赖发布的包
3. **源码路径**：确保开发环境中的源码路径配置正确
4. **代理配置**：两个环境都配置了 Vite 代理来处理 CORS 问题

## 🆘 常见问题

### Q: 开发环境无法加载 SDK 源码？
A: 检查 `vite.config.ts` 中的路径别名配置是否正确。

### Q: 生产环境报错找不到包？
A: 确保已经构建和发布了 SDK 包，并且版本号正确。

### Q: 代理请求失败？
A: 检查 Vite 代理配置，确保目标服务器可访问。

### Q: 端口被占用？
A: 修改 `vite.config.ts` 中的端口配置。

## 🔄 开发流程

1. **功能开发**：在开发环境中进行功能开发和调试
2. **功能测试**：在开发环境中测试新功能
3. **构建发布**：构建和发布 SDK 包
4. **集成测试**：在生产环境中验证发布包
5. **问题修复**：如有问题，回到开发环境修复

这样的双环境设计可以大大提高开发效率，避免每次修改都需要构建和发布的繁琐过程。
